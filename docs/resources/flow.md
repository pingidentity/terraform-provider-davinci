---
page_title: "davinci_flow Resource - terraform-provider-davinci"
subcategory: "Flow"
description: |-
  
---

# davinci_flow (Resource)



## Example Usage

```terraform
//Read all connections - This is a good first call to make
data "davinci_connections" "all" {
}

resource "davinci_connection" "flow" {
  name           = "Flow"
  connector_id   = "flowConnector"
  environment_id = var.environment_id
  // Forcing dependency on the inital connection provides better consistency when waiting for bootstrap to complete
  depends_on = [data.davinci_connections.all]
}

resource "davinci_flow" "mainflow" {
  environment_id = var.environment_id
  flow_json      = "{\"customerId\":\"1234\",\"name\":\"mainflow\",\"description\":\"\",\"flowStatus\":\"enabled\",\"createdDate...\"\"connectorIds\":[\"httpConnector\",\"flowConnector\"],\"savedDate\":1662961640542,\"variables\":[]}"
  deploy         = true

  // Dependent subflows are defined in subflows blocks.
  // These should always point to managed subflows
  subflow_link {
    id   = resource.davinci_flow.subflow.id
    name = resource.davinci_flow.subflow.name
  }
  // Dependent connections are defined in conections blocks. 
  // It is best practice to define all connections referenced the flow_json. This prevents a mismatch between the flow_json and the connections

  // This sample references a managed connection
  connection_link {
    id   = davinci_connection.flow.id
    name = davinci_connection.flow.name
  }
  // This sample uses a bootstrapped connection
  connection_link {
    name = "Http"
    // default connection id for the bootstrapped Http connector
    id = "867ed4363b2bc21c860085ad2baa817d"
  }

}

resource "davinci_flow" "subflow" {
  environment_id = var.environment_id
  flow_json      = file("subflow.json")
  deploy         = true
  connection_link {
    id   = "867ed4363b2bc21c860085ad2baa817d"
    name = "Http"
  }
  connection_link {
    id   = davinci_connection.flow.id
    name = davinci_connection.flow.name
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `environment_id` (String) PingOne Environment to import flow into.
- `flow_json` (String, Sensitive) DaVinci Flow in raw json format.

### Optional

- `connection_link` (Block Set) Connections this flow depends on. flow_json connectionId will be updated to id matching name . (see [below for nested schema](#nestedblock--connection_link))
- `deploy` (Boolean) Deploy Flow after import. Flows must be deployed to be used. Defaults to `true`.
- `subflow_link` (Block Set) Child flows of this resource. Required to keep mapping if flow_json contains subflows. flow_json subflowId will be updated to id matching name. Note, subflow will automatically point to latest version (-1). (see [below for nested schema](#nestedblock--subflow_link))

### Read-Only

- `flow_variables` (List of Object) Returned list of Flow Context variables. These are Variable resources that are created and managed by the Flow resource via flow_json (see [below for nested schema](#nestedatt--flow_variables))
- `id` (String) The ID of this resource.
- `name` (String) Computed Flow Name after import. Matches 'name' in flow_json

<a id="nestedblock--connection_link"></a>
### Nested Schema for `connection_link`

Required:

- `id` (String) A string that specifies the connector ID that will be used when flow is imported.
- `name` (String) The connector name.  If `replace_import_connection_id` is also specified, this value is used when the flow is imported.  If `replace_import_connection_id` is not specified, the name must match that of the connector in the import file, so the connector ID in the `id` parameter can be updated.

Optional:

- `replace_import_connection_id` (String) Connection ID of the connector in the import to replace with the connector described in `id` and `name`.  This can be found in the source system in the "Connectors" menu, but is also at the following path in the JSON file: `[enabledGraphData|graphData].elements.nodes.data.connectionId`.


<a id="nestedblock--subflow_link"></a>
### Nested Schema for `subflow_link`

Required:

- `id` (String) Subflow Flow ID that will be used when flow is imported.
- `name` (String) Subflow Name to match when updating flow_json subflowId.


<a id="nestedatt--flow_variables"></a>
### Nested Schema for `flow_variables`

Read-Only:

- `context` (String)
- `description` (String)
- `flow_id` (String)
- `id` (String)
- `max` (Number)
- `min` (Number)
- `mutable` (Boolean)
- `name` (String)
- `type` (String)

## Import

Import is supported using the following syntax, where attributes in `<>` brackets are replaced with the relevant ID.  For example, `<environment_id>` should be replaced with the ID of the environment to import from.

```shell
$ terraform import davinci_flow.example <environment_id>/<davinci_flow_id>
```