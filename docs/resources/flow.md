---
page_title: "davinci_flow Resource - terraform-provider-davinci"
subcategory: "Flow"
description: |-
  Resource to import and manage a DaVinci flow in an environment.  Connection and Subflow references in the JSON export can be overridden with ones managed by Terraform, see the examples and schema below for details.
---

# davinci_flow (Resource)

Resource to import and manage a DaVinci flow in an environment.  Connection and Subflow references in the JSON export can be overridden with ones managed by Terraform, see the examples and schema below for details.

## Example Usage

```terraform
resource "davinci_connection" "my_awesome_flow_connector" {
  environment_id = var.environment_id

  name         = "Flow"
  connector_id = "flowConnector"
}

resource "davinci_flow" "my_awesome_subflow" {
  environment_id = var.environment_id

  flow_json = jsondecode(file("./path/to/example-subflow.json"))
  name      = "My Awesome Subflow"
  deploy    = true

  connection_link {
    id                           = davinci_connection.my_awesome_flow_connector.id
    name                         = davinci_connection.my_awesome_flow_connector.name
    replace_import_connection_id = "33329a264e268ab31fb19637debf1ea3"
  }
}

resource "davinci_flow" "my_awesome_main_flow" {
  environment_id = var.environment_id

  flow_json = jsondecode(file("./path/to/example-mainflow.json"))
  name      = "My Awesome Main Flow"
  deploy    = true

  subflow_link {
    id                        = resource.davinci_flow.my_awesome_subflow.id
    name                      = resource.davinci_flow.my_awesome_subflow.name
    replace_import_subflow_id = "07503fed5c02849dbbd5ee932da654b2"
  }

  connection_link {
    id                           = davinci_connection.my_awesome_flow_connector.id
    name                         = davinci_connection.my_awesome_flow_connector.name
    replace_import_connection_id = "33329a264e268ab31fb19637debf1ea3"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `environment_id` (String) The ID of the PingOne environment to import the DaVinci flow to.  Must be a valid PingOne resource ID.  This field is immutable and will trigger a replace plan if changed.
- `flow_json` (String) The DaVinci Flow to import, in raw JSON format.  Should be a JSON file that has been exported from a source DaVinci environment.  Must be a valid JSON string.

### Optional

- `connection_link` (Block Set) Mappings to connections that this flow depends on.  Connections should be managed (with the `davinci_connection` resource) or retrieved (with the `davinci_connection` data source) to provide the mappings needed for this configuration block. (see [below for nested schema](#nestedblock--connection_link))
- `deploy` (Boolean, Deprecated) **Deprecation notice:** This attribute is deprecated and will be removed in a future release.  Flows are automatically deployed on import. A boolean that specifies whether to deploy the flow after import.  Defaults to `true`.
- `description` (String) A string that specifies a description of the flow.  If the field is left blank, a description value will be derived by the service.
- `name` (String) A string that identifies the flow name after import.  If the field is left blank, a flow name will be derived by the service from the name in the import JSON (the `flow_json` parameter).
- `subflow_link` (Block Set) Child flows of this resource, where the `flow_json` contains reference to subflows.  If the `flow_json` contains subflows, this one `subflow_link` block is required per contained subflow. (see [below for nested schema](#nestedblock--subflow_link))

### Read-Only

- `flow_configuration_json` (String) The parsed configuration of the DaVinci Flow import JSON.  Drift is calculated based on this attribute.
- `flow_export_json` (String) The DaVinci Flow export in raw JSON format following successful import, including target environment metadata.
- `flow_variables` (Attributes Set) Returned list of Flow Context variables. These are variable resources that are created and managed by the Flow resource via `flow_json`. (see [below for nested schema](#nestedatt--flow_variables))
- `id` (String) The ID of this resource.

<a id="nestedblock--connection_link"></a>
### Nested Schema for `connection_link`

Required:

- `id` (String) A string that specifies the connector ID that will be applied when flow is imported.
- `name` (String) The connector name.  If `replace_import_connection_id` is also specified, this value is used when the flow is imported.  If `replace_import_connection_id` is not specified, the name must match that of the connector in the import file, so the connector ID in the `id` parameter can be updated.

Optional:

- `replace_import_connection_id` (String) Connection ID of the connector in the import to replace with the connector described in `id` and `name` parameters.  This can be found in the source system in the "Connectors" menu, but is also at the following path in the JSON file: `[enabledGraphData|graphData].elements.nodes.data.connectionId`.


<a id="nestedblock--subflow_link"></a>
### Nested Schema for `subflow_link`

Required:

- `id` (String) A string that specifies the subflow ID that will be applied when flow is imported.
- `name` (String) The subflow name.  If `replace_import_subflow_id` is also specified, this value is used when the flow is imported.  If `replace_import_subflow_id` is not specified, the name must match that of the connector in the import file, so the connector ID in the `id` parameter can be updated.

Optional:

- `replace_import_subflow_id` (String) Subflow ID of the subflow in the import to replace with the subflow described in `id` and `name` parameters.  This can be found in the source system in the "Connectors" menu, but is also at the following path in the JSON file: `[enabledGraphData|graphData].elements.nodes.data.connectionId`.


<a id="nestedatt--flow_variables"></a>
### Nested Schema for `flow_variables`

Read-Only:

- `context` (String) The variable context.  Should always return `flow`.
- `description` (String) A string that specifies the description of the variable.
- `flow_id` (String) The flow ID that the variable belongs to, which should match the ID of this resource.
- `id` (String) The DaVinci internal ID of the variable.
- `max` (Number) The maximum value of the variable, if the `type` parameter is set as `number`.
- `min` (Number) The minimum value of the variable, if the `type` parameter is set as `number`.
- `mutable` (Boolean) A boolean that specifies whether the variable is mutable.  If `true`, the variable can be modified by the flow. If `false`, the variable is read-only and cannot be modified by the flow.
- `name` (String) The user friendly name of the variable in the UI.
- `type` (String) The variable's data type.  Expected to be one of `string`, `number`, `boolean`, `object`.

## Import

Import is supported using the following syntax, where attributes in `<>` brackets are replaced with the relevant ID.  For example, `<environment_id>` should be replaced with the ID of the environment to import from.

```shell
$ terraform import davinci_flow.example <environment_id>/<davinci_flow_id>
```